


<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digital Tasbih</title>

<style>
body{
  font-family:Arial;
  text-align:center;
  background:#0f172a;
  color:white;
  margin-top:50px;
}
#counter{font-size:70px;margin:10px;}
button{
  font-size:16px;
  padding:12px 20px;
  margin:5px;
  border:none;
  border-radius:10px;
}
.progress{
  width:80%;
  height:20px;
  background:#1e293b;
  margin:auto;
  border-radius:10px;
}
.bar{
  height:100%;
  width:0%;
  background:#22c55e;
  border-radius:10px;
}
</style>
</head>

<body>

<h2 id="dhikr">SubhanAllah</h2>
<div id="counter">0</div>

<div class="progress">
  <div class="bar" id="bar"></div>
</div>
<br>

<select id="target">
<option value="33">33</option>
<option value="99">99</option>
<option value="100">100</option>
</select>

<select id="speed">
<option value="1000">Auto 1s</option>
<option value="1500" selected>Auto 1.5s</option>
<option value="2000">Auto 2s</option>
</select>
<br><br>

<button onclick="tap()">Tap</button>
<button onclick="reset()">Reset</button>
<br>
<button onclick="start()">Auto</button>
<button onclick="stop()">Stop</button>

<script>
let count = localStorage.getItem("count") || 0;
let dhikrList=["SubhanAllah","Alhamdulillah","Allahu Akbar"];
let dhikrIndex=0;
let auto;

update();

function tap(){
  count++;
  save();
  check();
  update();
}

function reset(){
  count=0;
  dhikrIndex=0;
  save();
  update();
}

function start(){
  let speed=document.getElementById("speed").value;
  auto=setInterval(tap,speed);
}

function stop(){
  clearInterval(auto);
}

function check(){
  let target=document.getElementById("target").value;
  if(count%33==0 && count!=0){
    navigator.vibrate(100);
    dhikrIndex=(dhikrIndex+1)%3;
    document.getElementById("dhikr").innerText=dhikrList[dhikrIndex];
  }
  if(count>=target){
    stop();
  }
}

function update(){
  document.getElementById("counter").innerText=count;
  let target=document.getElementById("target").value;
  document.getElementById("bar").style.width=(count/target)*100+"%";
}

function save(){
  localStorage.setItem("count",count);
}
</script>

</body>
</html>